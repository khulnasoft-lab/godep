{
  "version": 3,
  "sources": ["fetch.ts"],
  "sourcesContent": ["/*!\n * @license\n * Copyright 2020 The Go Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style\n * license that can be found in the LICENSE file.\n */\n\nconst fetchButton = document.querySelector('.js-fetchButton');\nif (fetchButton) {\n  fetchButton.addEventListener('click', (e) => {\n    e.preventDefault();\n    fetchPath();\n  });\n}\n\nasync function fetchPath() {\n  const fetchMessageEl = document.querySelector<HTMLHeadingElement>(\n    '.js-fetchMessage'\n  );\n  const fetchMessageSecondary = document.querySelector<HTMLParagraphElement>(\n    '.js-fetchMessageSecondary'\n  );\n  const fetchButton = document.querySelector<HTMLButtonElement>(\n    '.js-fetchButton'\n  );\n  const fetchLoading = document.querySelector<HTMLDivElement>(\n    '.js-fetchLoading'\n  );\n  if (\n    !(fetchMessageEl && fetchMessageSecondary && fetchButton && fetchLoading)\n  ) {\n    return;\n  }\n  fetchMessageEl.textContent = `Fetching ${fetchMessageEl.dataset.path}`;\n  fetchMessageSecondary.textContent =\n    'Feel free to navigate away and check back later, we\u2019ll keep working on it!';\n  fetchButton.style.display = 'none';\n  fetchLoading.style.display = 'block';\n\n  const response = await fetch(`/fetch${window.location.pathname}`, {\n    method: 'POST',\n  });\n  if (response.ok) {\n    window.location.reload();\n    return;\n  }\n  const responseText = await response.text();\n  fetchLoading.style.display = 'none';\n  fetchMessageSecondary.textContent = '';\n  const responseTextParsedDOM = new DOMParser().parseFromString(\n    responseText,\n    'text/html'\n  );\n  fetchMessageEl.innerText =\n    responseTextParsedDOM.documentElement.textContent ?? '';\n}\n\nexport {};\n"],
  "mappings": "AAOA,IAAMA,EAAc,SAAS,cAAc,iBAAiB,EACxDA,GACFA,EAAY,iBAAiB,QAAU,GAAM,CAC3C,EAAE,eAAe,EACjBC,EAAU,CACZ,CAAC,EAGH,eAAeA,GAAY,CAf3B,IAAAC,EAgBE,IAAMC,EAAiB,SAAS,cAC9B,kBACF,EACMC,EAAwB,SAAS,cACrC,2BACF,EACMJ,EAAc,SAAS,cAC3B,iBACF,EACMK,EAAe,SAAS,cAC5B,kBACF,EACA,GACE,EAAEF,GAAkBC,GAAyBJ,GAAeK,GAE5D,OAEFF,EAAe,YAAc,YAAYA,EAAe,QAAQ,OAChEC,EAAsB,YACpB,kFACFJ,EAAY,MAAM,QAAU,OAC5BK,EAAa,MAAM,QAAU,QAE7B,IAAMC,EAAW,MAAM,MAAM,SAAS,OAAO,SAAS,WAAY,CAChE,OAAQ,MACV,CAAC,EACD,GAAIA,EAAS,GAAI,CACf,OAAO,SAAS,OAAO,EACvB,OAEF,IAAMC,EAAe,MAAMD,EAAS,KAAK,EACzCD,EAAa,MAAM,QAAU,OAC7BD,EAAsB,YAAc,GACpC,IAAMI,EAAwB,IAAI,UAAU,EAAE,gBAC5CD,EACA,WACF,EACAJ,EAAe,WACbD,EAAAM,EAAsB,gBAAgB,cAAtC,KAAAN,EAAqD,EACzD",
  "names": ["fetchButton", "fetchPath", "_a", "fetchMessageEl", "fetchMessageSecondary", "fetchLoading", "response", "responseText", "responseTextParsedDOM"]
}
